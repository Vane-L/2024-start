source link: [从零扩展到数百万用户](https://bytebytego.com/courses/system-design-interview/scale-from-zero-to-millions-of-users)

### 垂直缩放与水平缩放
- 垂直扩展，也称为“纵向扩展”，是指为服务器添加更多功能（CPU、RAM 等）的过程。
  - 当**流量**较低时，垂直扩展是一个不错的选择，垂直扩展的简单性是其主要优点。 不幸的是，它有严重的局限性。
    - 垂直缩放有一个硬性限制。不可能向单个服务器添加无限的 CPU 和内存。
    - 垂直扩展没有故障转移和冗余。如果一台服务器出现故障，网站/应用程序也会随之完全崩溃。
- 水平扩展（称为“横向扩展”）允许您通过向资源池中添加更多服务器来进行扩展。

### 使用缓存的注意事项
以下是使用缓存系统的一些注意事项：
1. 决定何时使用缓存。**当数据频繁读取但不频繁修改时，请考虑使用缓存。** 由于缓存数据存储在易失性内存中，因此缓存服务器并不适合持久保存数据。
2. 过期政策。实施过期政策是一个很好的做法。一旦缓存数据过期，就会从缓存中删除。**当没有过期策略时，缓存数据将永久保存在内存中。** 
3. 一致性：这涉及保持数据存储和缓存同步。由于数据存储和缓存上的数据修改操作不在单个事务中，因此可能会发生不一致。
4. 缓解故障：单个缓存服务器代表潜在的单点故障 (SPOF)。因此，建议跨不同数据中心使用多个缓存服务器以避免 SPOF。另一种推荐的方法是按一定百分比过度配置所需的内存。随着内存使用量的增加，这提供了一个缓冲区。
5. 驱逐策略：一旦缓存已满，任何向缓存添加项目的请求都可能导致现有项目被删除。这称为缓存驱逐。最近最少使用 (LRU) 是最流行的缓存逐出策略。


### 数百万用户的系统
- 保持 Web 层无状态
- 在每一层建立冗余
- 尽可能多地缓存数据
- 支持多个数据中心
- 在 CDN 中托管静态资产
- 通过分片扩展数据层
- 将层级拆分为单独的服务
- 监控您的系统并使用自动化工具

